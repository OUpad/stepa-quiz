<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∫–æ –î–Ω—é –†–æ–∂–¥–µ–Ω–∏—è –°—Ç—ë–ø—ã</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #fdf6f0;
      font-size: 18px;
    }
    h1, h2 {
      color: #6b4d2d;
      font-size: 28px;
    }
    .question {
      margin: 20px 0;
    }
    label {
      display: block;
      margin: 5px 0;
      font-size: 18px;
    }
    input[type="text"] {
      font-size: 20px;
      padding: 10px;
      width: 100%;
      max-width: 400px;
      margin-top: 10px;
    }
    .submit-btn {
      margin-top: 20px;
      font-size: 20px;
      padding: 10px 20px;
    }
    .result {
      margin-top: 30px;
      font-weight: bold;
      font-size: 24px;
    }
    #final-screen {
      display: none;
      text-align: center;
      padding: 30px;
    }
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <img src="–ü–∏–∫–Ω–∏–∫.jpg" alt="–°—Ç—ë–ø–∞" style="max-width: 100%; height: auto; border-radius: 16px; margin-bottom: 20px;">
  <h1>üéâ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∫–æ –î–Ω—é –†–æ–∂–¥–µ–Ω–∏—è –°—Ç—ë–ø—ã üéâ</h1>

  <form id="quiz-form">
    <div class="question">
      <label><strong>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:</strong></label>
      <input type="text" name="username" required>
    </div>
  </form>

  <div id="final-screen">
    <h2>–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ! üéà</h2>
    <p id="final-result"></p>
    <canvas id="confetti-canvas" class="confetti"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function capitalize(text) {
      return text.charAt(0).toUpperCase() + text.slice(1);
    }

    const questions = [...] // trimmed for brevity

    const form = document.getElementById('quiz-form');

    questions.forEach((q, index) => {
      const div = document.createElement('div');
      div.className = 'question';
      const label = document.createElement('label');
      label.innerHTML = `<strong>${index + 1}. ${q.q}</strong>`;
      div.appendChild(label);

      const shuffled = shuffle([...q.options]);
      shuffled.forEach(opt => {
        const value = capitalize(opt);
        const id = `q${index}_${value}`;
        const radio = `<label><input type="radio" name="q${index}" value="${value}" required> ${value}</label>`;
        div.innerHTML += radio;
      });

      form.appendChild(div);
    });

    const button = document.createElement('button');
    button.className = 'submit-btn';
    button.type = 'submit';
    button.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã';
    form.appendChild(button);

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const data = new FormData(form);
      const username = data.get('username');
      let correct = 0;
      questions.forEach((q, i) => {
        if (data.get(`q${i}`) === capitalize(q.a)) correct++;
      });

      await fetch('https://script.google.com/macros/s/AKfycbyHg302lzgrovDJEmdXCMpIF6EAJsuhzWyLLen4NT9776gRheTQNei5Ei-RTmq1ld12vw/exec', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: username, score: correct })
      });

      form.style.display = 'none';
      document.getElementById('final-screen').style.display = 'block';
      document.getElementById('final-result').textContent = `${username}, –≤—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${correct} –∏–∑ ${questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤!`;
      confetti({
        particleCount: 300,
        spread: 120,
        origin: { y: 0.6 }
      });
    });
  </script>
</body>
</html>
